---
/**
 * Blog Index Page - Gutted for Redesign
 *
 * Preserves all data fetching logic.
 */

import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getBusinessProfile } from '../../lib/getBusinessProfile';
import { getLocalBusinessSchema } from '../../lib/schema';

const profile = await getBusinessProfile();
const schema = getLocalBusinessSchema(profile);

// Get all blog posts sorted by publish date descending
const allPosts = await getCollection('blog');
const sortedPosts = allPosts.sort((a, b) =>
  b.data.publishDate.getTime() - a.data.publishDate.getTime()
);

// Get featured post (most recent featured, or most recent overall)
const featuredPost = sortedPosts.find(post => post.data.featured) || sortedPosts[0];
const otherPosts = sortedPosts.filter(post => post.slug !== featuredPost?.slug);

// Category display names
const categoryNames: Record<string, string> = {
  heating: 'Heating',
  cooling: 'Cooling',
  maintenance: 'Maintenance',
  efficiency: 'Energy Efficiency',
  guides: 'Guides',
  news: 'News',
};
---

<BaseLayout
  title="HVAC Tips & Guides - B.A.P Heating and Cooling Blog"
  description="Expert HVAC tips, maintenance guides, and industry insights from B.A.P Heating and Cooling. Learn how to keep your home comfortable year-round."
  schema={schema}
>
  <div class="redesign-placeholder">
    <h1>HVAC Tips & Guides</h1>
    <p>Blog page redesign in progress. {sortedPosts.length} posts available.</p>
  </div>
</BaseLayout>
