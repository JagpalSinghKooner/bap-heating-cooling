---
/**
 * Locations Index Page - Gutted for Redesign
 *
 * Preserves all data fetching logic.
 */

import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';
import { buildLocationPath } from '../lib/slugBuilder';

const locations = await getCollection('locations');

// Group locations by region
const locationsByRegion: Record<string, typeof locations> = {};
locations.forEach(location => {
  const region = location.data.region;
  if (!locationsByRegion[region]) {
    locationsByRegion[region] = [];
  }
  locationsByRegion[region].push(location);
});

// Sort locations within each region alphabetically
Object.keys(locationsByRegion).forEach(region => {
  locationsByRegion[region].sort((a, b) => a.data.title.localeCompare(b.data.title));
});
---

<BaseLayout
  title="Locations - B.A.P Heating and Cooling"
  description="Areas we serve with professional heating and cooling services"
>
  <div class="redesign-placeholder">
    <h1>Service Areas</h1>
    <p>Locations page redesign in progress. {locations.length} locations served.</p>
  </div>
</BaseLayout>
