---
/**
 * About Us Page
 *
 * Tells the B.A.P story - family-owned, local trust, professional service.
 * Built to establish credibility and convert visitors to phone calls.
 *
 * Sections:
 * 1. PageHero (variant="default")
 * 2. Owner/Mission section
 * 3. Team credentials grid
 * 4. Timeline/History (company milestones)
 * 5. Certifications display
 * 6. ReviewsCarousel
 * 7. CTASection
 */

import BaseLayout from '../layouts/BaseLayout.astro';
import { getBusinessProfile, getPhoneLink, getPhoneDisplay } from '../lib/getBusinessProfile';
import { getLocalBusinessSchema } from '../lib/schema';

// Components
import PageHero from '../components/shared/PageHero.astro';
import CTASection from '../components/shared/CTASection.astro';
import ReviewsCarousel from '../components/shared/ReviewsCarousel.astro';
import ProcessTimeline from '../components/shared/ProcessTimeline.astro';
import Section from '../components/primitives/Section.astro';
import Container from '../components/primitives/Container.astro';
import Heading from '../components/primitives/Heading.astro';
import Text from '../components/primitives/Text.astro';
import Card from '../components/primitives/Card.astro';
import CardBody from '../components/primitives/CardBody.astro';
import Icon from '../components/primitives/Icon.astro';
import Badge from '../components/primitives/Badge.astro';

const profile = await getBusinessProfile();
const schema = getLocalBusinessSchema(profile);
const phoneLink = getPhoneLink(profile);
const phoneDisplay = getPhoneDisplay(profile);

const teamMembers = [
  {
    role: 'Senior HVAC Technician',
    description: 'Certified specialists with years of field experience',
    imageUrl: '/images/services/hvac-repair-rooftop.jpg',
    credentials: ['TSSA Certified', '15+ Years Experience']
  },
  {
    role: 'Installation Expert',
    description: 'Precision installations with manufacturer certification',
    imageUrl: '/images/services/furnace-installation.jpg',
    credentials: ['Carrier Authorized', 'Licensed Professional']
  },
  {
    role: 'Service Specialist',
    description: 'Dedicated to keeping your system running efficiently',
    imageUrl: '/images/services/ac-unit-maintenance.jpg',
    credentials: ['TSSA Certified', 'Service Excellence']
  },
  {
    role: 'Comfort Advisor',
    description: 'Helping you find the right solution for your home',
    imageUrl: '/images/services/commercial-hvac.jpg',
    credentials: ['Industry Expert', 'Customer Focused']
  },
];

const certifications = [
  { name: 'TSSA Certified', description: 'Technical Standards & Safety Authority' },
  { name: 'Carrier Factory Authorized', description: 'Premium dealer status' },
  { name: 'Licensed & Insured', description: 'Full liability coverage' },
  { name: 'BBB Accredited', description: 'A+ Rating' },
];

const milestones = [
  {
    step: 1,
    title: '1992 - Founded',
    description: 'Paul Palmer starts B.A.P with a single truck and a commitment to honest service.',
  },
  {
    step: 2,
    title: '2005 - Expanded',
    description: 'Grew to serve all of Southern Ontario with a full team of certified technicians.',
  },
  {
    step: 3,
    title: '2015 - Carrier Partner',
    description: 'Became a Carrier Factory Authorized Dealer for premium equipment.',
  },
  {
    step: 4,
    title: 'Today',
    description: 'Still family-owned, still committed to the same values that started it all.',
  },
];
---

<BaseLayout
  title="About Us - B.A.P Heating and Cooling"
  description="Learn about B.A.P Heating & Cooling - family-owned since 1992. Meet our certified team and discover why Southern Ontario trusts us for their HVAC needs."
  schema={schema}
>
  <!-- Hero Section -->
  <PageHero
    title="Family-Owned Since 1992"
    description="Three decades of keeping Southern Ontario families comfortable. We're not a faceless corporation - we're your neighbors, and we take that responsibility seriously."
    eyebrow="About B.A.P"
    variant="default"
    breadcrumbs={[
      { label: 'Home', href: '/' },
      { label: 'About Us', href: '/about-us/' },
    ]}
    ctaButtons={[
      { label: 'Call Us Today', href: phoneLink, variant: 'primary', icon: 'phone' },
    ]}
  />

  <!-- Owner/Mission Section -->
  <Section variant="warm" padding="lg">
    <Container size="xl">
      <div class="about-mission-grid">
        <div class="about-mission-content">
          <Text size="sm" color="primary" weight="semibold" class="about-mission-eyebrow">
            Our Story
          </Text>
          <Heading level={2} size="3xl" class="about-mission-title">
            Real People, Real Service
          </Heading>
          <div class="about-mission-text">
            <Text size="lg" color="secondary">
              When Paul Palmer founded B.A.P Heating & Cooling in 1992, he had a simple vision:
              provide the kind of service he'd want for his own family. No hidden fees. No pressure
              tactics. Just honest work at fair prices.
            </Text>
            <Text size="lg" color="secondary">
              That vision hasn't changed. We're still family-owned, still locally operated, and
              still committed to treating every customer like a neighbor - because you probably are.
            </Text>
            <Text size="lg" color="secondary">
              When you call B.A.P, you're not getting a call center. You're getting real people
              who live and work in your community. People who will be here long after the job is done.
            </Text>
          </div>
          <div class="about-mission-stats">
            <div class="about-stat">
              <span class="about-stat-number">30+</span>
              <span class="about-stat-label">Years in Business</span>
            </div>
            <div class="about-stat">
              <span class="about-stat-number">10,000+</span>
              <span class="about-stat-label">Happy Customers</span>
            </div>
            <div class="about-stat">
              <span class="about-stat-number">24/7</span>
              <span class="about-stat-label">Emergency Service</span>
            </div>
          </div>
        </div>
        <div class="about-mission-image">
          <div class="about-mission-image-wrapper">
            <img
              src="/images/services/hvac-repair-rooftop.jpg"
              alt="B.A.P technician at work"
              loading="lazy"
              decoding="async"
            />
          </div>
          <div class="about-mission-badge">
            <Icon name="shield" size="lg" />
            <span>Licensed & Insured</span>
          </div>
        </div>
      </div>
    </Container>
  </Section>

  <!-- Company Timeline -->
  <Section variant="muted" padding="lg">
    <Container size="xl">
      <div class="about-timeline-header">
        <Text size="sm" color="primary" weight="semibold">Our Journey</Text>
        <Heading level={2} size="2xl" align="center">
          Three Decades of Excellence
        </Heading>
        <Text size="lg" color="secondary" align="center" class="about-timeline-description">
          From a single truck to Southern Ontario's trusted HVAC partner
        </Text>
      </div>
      <ProcessTimeline
        steps={milestones}
        variant="auto"
        showNumbers={false}
      />
    </Container>
  </Section>

  <!-- Team Section -->
  <Section variant="default" padding="lg">
    <Container size="xl">
      <div class="about-team-header">
        <Text size="sm" color="primary" weight="semibold">Our Team</Text>
        <Heading level={2} size="2xl" align="center">
          Certified Professionals
        </Heading>
        <Text size="lg" color="secondary" align="center" class="about-team-description">
          Every technician is background-checked, drug-tested, and factory-trained
        </Text>
      </div>
      <div class="about-team-grid">
        {teamMembers.map((member, index) => (
          <div class="about-team-card-wrapper" style={`--stagger-index: ${index}`}>
            <Card variant="default" padding="none" class="about-team-card">
              <div class="about-team-card-image">
                <img src={member.imageUrl} alt={member.role} loading="lazy" decoding="async" />
              </div>
              <CardBody padding="md" gap="sm">
                <Heading level={3} size="md" weight="semibold">
                  {member.role}
                </Heading>
                <Text size="sm" color="secondary">
                  {member.description}
                </Text>
                <div class="about-team-credentials">
                  {member.credentials.map((cred) => (
                    <Badge variant="primary" size="sm">{cred}</Badge>
                  ))}
                </div>
              </CardBody>
            </Card>
          </div>
        ))}
      </div>
    </Container>
  </Section>

  <!-- Certifications Section -->
  <Section variant="muted" padding="md">
    <Container size="xl">
      <div class="about-certs-header">
        <Text size="sm" color="primary" weight="semibold">Credentials</Text>
        <Heading level={2} size="2xl" align="center">
          Industry-Recognized Excellence
        </Heading>
      </div>
      <div class="about-certs-grid">
        {certifications.map((cert, index) => (
          <div class="about-cert-item" style={`--stagger-index: ${index}`}>
            <div class="about-cert-icon">
              <Icon name="award" size="xl" color="primary" />
            </div>
            <div class="about-cert-content">
              <Heading level={3} size="sm" weight="semibold">
                {cert.name}
              </Heading>
              <Text size="sm" color="secondary">
                {cert.description}
              </Text>
            </div>
          </div>
        ))}
      </div>
    </Container>
  </Section>

  <!-- Reviews Section -->
  <ReviewsCarousel
    title="What Our Customers Say"
    eyebrow="Testimonials"
    description="Real reviews from real customers across Southern Ontario"
    limit={6}
    showSummary={true}
    variant="default"
  />

  <!-- CTA Section -->
  <CTASection
    variant="primary"
    headline="Ready to Experience the B.A.P Difference?"
    description="Join the thousands of families who trust us with their comfort. Call today for honest service at fair prices."
    primaryCTA={{
      label: 'Call Now',
      href: phoneLink,
    }}
    secondaryCTA={{
      label: 'View Services',
      href: '/services/',
    }}
    showPhone={true}
  />
</BaseLayout>

<style>
  /* ============================================
     MISSION SECTION
     ============================================ */

  .about-mission-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--space-12);
    align-items: center;
  }

  @media (min-width: 1024px) {
    .about-mission-grid {
      grid-template-columns: 1fr 1fr;
      gap: var(--space-16);
    }
  }

  .about-mission-content {
    display: flex;
    flex-direction: column;
    gap: var(--space-6);
  }

  .about-mission-eyebrow {
    text-transform: uppercase;
    letter-spacing: var(--letter-spacing-wider);
  }

  .about-mission-title {
    text-wrap: balance;
  }

  .about-mission-text {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
  }

  .about-mission-stats {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-8);
    margin-top: var(--space-4);
    padding-top: var(--space-6);
    border-top: 1px solid var(--color-border-primary);
  }

  .about-stat {
    display: flex;
    flex-direction: column;
    gap: var(--space-1);
  }

  .about-stat-number {
    font-family: var(--font-family-heading);
    font-size: var(--font-size-4xl);
    font-weight: var(--font-weight-bold);
    color: var(--color-primary-600);
    line-height: 1;
  }

  .about-stat-label {
    font-family: var(--font-family-body);
    font-size: var(--font-size-sm);
    color: var(--color-text-secondary);
  }

  .about-mission-image {
    position: relative;
  }

  .about-mission-image-wrapper {
    position: relative;
    border-radius: var(--radius-xl);
    overflow: hidden;
    box-shadow: var(--shadow-xl);
  }

  .about-mission-image-wrapper img {
    width: 100%;
    height: auto;
    aspect-ratio: 4/3;
    object-fit: cover;
  }

  .about-mission-badge {
    position: absolute;
    bottom: var(--space-4);
    left: var(--space-4);
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-3) var(--space-4);
    background: white;
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-lg);
    font-family: var(--font-family-heading);
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-semibold);
    color: var(--color-text-primary);
  }

  /* ============================================
     TIMELINE SECTION
     ============================================ */

  .about-timeline-header {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    gap: var(--space-3);
    margin-bottom: var(--space-12);
  }

  .about-timeline-description {
    max-width: 50ch;
  }

  /* ============================================
     TEAM SECTION
     ============================================ */

  .about-team-header {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    gap: var(--space-3);
    margin-bottom: var(--space-12);
  }

  .about-team-description {
    max-width: 50ch;
  }

  .about-team-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--space-6);
  }

  @media (min-width: 640px) {
    .about-team-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (min-width: 1024px) {
    .about-team-grid {
      grid-template-columns: repeat(4, 1fr);
    }
  }

  .about-team-card {
    animation: fadeInUp var(--duration-slow) var(--ease-out) forwards;
    animation-delay: calc(var(--stagger-index, 0) * 100ms);
    opacity: 0;
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(16px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .about-team-card-image {
    aspect-ratio: 4/3;
    overflow: hidden;
  }

  .about-team-card-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform var(--duration-normal) var(--ease-out);
  }

  .about-team-card:hover .about-team-card-image img {
    transform: scale(1.05);
  }

  .about-team-credentials {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-2);
    margin-top: var(--space-2);
  }

  /* ============================================
     CERTIFICATIONS SECTION
     ============================================ */

  .about-certs-header {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    gap: var(--space-3);
    margin-bottom: var(--space-10);
  }

  .about-certs-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--space-6);
  }

  @media (min-width: 640px) {
    .about-certs-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (min-width: 1024px) {
    .about-certs-grid {
      grid-template-columns: repeat(4, 1fr);
    }
  }

  .about-cert-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    gap: var(--space-4);
    padding: var(--space-6);
    background: var(--color-surface-primary);
    border-radius: var(--radius-lg);
    border: 1px solid var(--color-border-primary);
    animation: fadeInUp var(--duration-slow) var(--ease-out) forwards;
    animation-delay: calc(var(--stagger-index, 0) * 100ms);
    opacity: 0;
  }

  .about-cert-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: var(--space-16);
    height: var(--space-16);
    background: linear-gradient(135deg, var(--color-primary-50) 0%, var(--color-primary-100) 100%);
    border-radius: var(--radius-xl);
  }

  .about-cert-content {
    display: flex;
    flex-direction: column;
    gap: var(--space-1);
  }

  /* ============================================
     REDUCED MOTION
     ============================================ */

  @media (prefers-reduced-motion: reduce) {
    .about-team-card,
    .about-cert-item {
      animation: none;
      opacity: 1;
    }

    .about-team-card:hover .about-team-card-image img {
      transform: none;
    }
  }
</style>
