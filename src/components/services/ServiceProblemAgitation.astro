---
/**
 * ServiceProblemAgitation - Problem agitation section
 *
 * Creates urgency by highlighting consequences of delay.
 * Emotional hook that leads to the solution section.
 */

import Section from '../primitives/Section.astro';
import SectionHeader from '../primitives/SectionHeader.astro';
import { getIconPath } from '../../lib/icons';

interface Problem {
  title: string;
  description: string;
  icon: string;
}

interface Props {
  serviceTitle: string;
  location?: {
    title: string;
  };
  problems: Problem[];
}

const { serviceTitle, location, problems } = Astro.props;

// Generate SEO-optimized H2
const h2Text = location
  ? `What Happens When You Delay ${serviceTitle} in ${location.title}, ON?`
  : `What Happens When You Delay ${serviceTitle}?`;

const descriptionText = `Delaying necessary ${serviceTitle.toLowerCase()} can cost you more in the long run. Here's what's at stake.`;
---

{problems && problems.length > 0 && (
  <Section variant="muted">
    {/* Header */}
    <SectionHeader
      eyebrow="Don't Wait Until It's Too Late"
      headline={h2Text}
      description={descriptionText}
    />

    {/* Problem Cards Grid */}
    <div class="grid gap-6 md:grid-cols-3">
      {problems.map((problem) => (
        <div class="group relative overflow-hidden rounded-xl border border-red-200 bg-gradient-to-br from-red-50 to-orange-50 p-6 transition-all hover:border-red-300 hover:shadow-lg dark:border-red-900/30 dark:from-red-950/20 dark:to-orange-950/20">
          {/* Icon */}
          <div class="mb-4 flex h-12 w-12 items-center justify-center rounded-lg bg-red-100 text-red-600 transition-colors group-hover:bg-red-600 group-hover:text-white dark:bg-red-900/30 dark:text-red-400">
            <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <Fragment set:html={getIconPath(problem.icon)} />
            </svg>
          </div>

          {/* Content */}
          <h3 class="mb-2 text-lg font-bold text-foreground">
            {problem.title}
          </h3>
          <p class="text-sm leading-relaxed text-muted-foreground">
            {problem.description}
          </p>
        </div>
      ))}
    </div>

    {/* Emotional Closing */}
    <div class="mt-10 text-center">
      <p class="text-lg font-medium text-foreground">
        The good news? These problems are preventable.
      </p>
    </div>
  </Section>
)}
