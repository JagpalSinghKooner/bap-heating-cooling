---
/**
 * ServiceProcess - Step-by-step process section
 *
 * Reduces customer anxiety by showing exactly what to expect.
 * Visual timeline/stepper design.
 */

import Section from '../primitives/Section.astro';
import SectionHeader from '../primitives/SectionHeader.astro';

interface ProcessStep {
  step: number;
  title: string;
  description: string;
}

interface Props {
  serviceTitle: string;
  location?: {
    title: string;
  };
  processSteps: ProcessStep[];
}

const { serviceTitle, location, processSteps } = Astro.props;

// Generate SEO-optimized H2
const h2Text = location
  ? `Your ${serviceTitle} Process in ${location.title}, ON`
  : `Your ${serviceTitle} Process`;

const descriptionText = `No surprises, no confusion. Here's exactly how we handle your ${serviceTitle.toLowerCase()} from start to finish.`;
---

{processSteps && processSteps.length > 0 && (
  <Section variant="default">
    {/* Header */}
    <SectionHeader
      eyebrow="What to Expect"
      headline={h2Text}
      description={descriptionText}
      class="mb-12"
    />

    {/* Process Steps - Horizontal on desktop, vertical on mobile */}
    <div class="relative">
      {/* Desktop: Horizontal stepper */}
      <div class="hidden lg:block">
        {/* Connector line */}
        <div class="absolute left-0 right-0 top-6 h-0.5 bg-gradient-to-r from-primary/20 via-primary to-primary/20" />

        <div class="relative grid grid-cols-4 gap-6">
          {processSteps.slice(0, 4).map((step, index) => (
            <div class="relative flex flex-col items-center text-center">
              {/* Step number circle */}
              <div class="relative z-10 mb-6 flex h-12 w-12 items-center justify-center rounded-full bg-primary text-lg font-bold text-white shadow-lg shadow-primary/30">
                {step.step}
              </div>

              {/* Content */}
              <h3 class="mb-2 text-lg font-bold text-foreground">
                {step.title}
              </h3>
              <p class="text-sm leading-relaxed text-muted-foreground">
                {step.description}
              </p>
            </div>
          ))}
        </div>
      </div>

      {/* Mobile/Tablet: Vertical timeline */}
      <div class="lg:hidden">
        <div class="relative">
          {/* Vertical connector line */}
          <div class="absolute left-6 top-0 bottom-0 w-0.5 bg-gradient-to-b from-primary via-primary to-primary/20" />

          <div class="space-y-8">
            {processSteps.map((step, index) => (
              <div class="relative flex gap-6">
                {/* Step number circle */}
                <div class="relative z-10 flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-primary text-lg font-bold text-white shadow-lg shadow-primary/30">
                  {step.step}
                </div>

                {/* Content */}
                <div class="flex-1 pb-2">
                  <h3 class="mb-2 text-lg font-bold text-foreground">
                    {step.title}
                  </h3>
                  <p class="text-sm leading-relaxed text-muted-foreground">
                    {step.description}
                  </p>
                </div>
              </div>
            ))}
          </div>
        </div>
      </div>
    </div>

    {/* Simple, clear footer */}
    <div class="mt-12 text-center">
      <p class="text-muted-foreground">
        Questions about the process?{' '}
        <a href="tel:+15197565754" class="font-semibold text-primary hover:underline">
          Give us a call
        </a>
        â€”we're happy to walk you through it.
      </p>
    </div>
  </Section>
)}
