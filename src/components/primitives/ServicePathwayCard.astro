---
/**
 * ServicePathwayCard Component
 * Premium service pathway card with image-left/content-right layout
 *
 * LAYOUT:
 * - Desktop: Image LEFT (40%), Content RIGHT (60%)
 * - Mobile: Image TOP (full width), Content BELOW
 *
 * BEHAVIOR:
 * - No accordion, no expandable drawer
 * - All services visible immediately
 * - Direct links to service pages (SEO crawlable)
 *
 * ACCESSIBILITY:
 * - Semantic HTML structure
 * - Meaningful image alt text
 * - Keyboard navigable service pills
 */

import ServicePill from './ServicePill.astro';

interface Service {
  readonly name: string;
  readonly href: string;
}

interface Props {
  title: string;
  description: string;
  imageSrc: string;
  imageAlt: string;
  services: readonly Service[];
}

const { title, description, imageSrc, imageAlt, services } = Astro.props;
---

<div
  class="pathway-card overflow-hidden rounded-lg border border-border bg-card transition-shadow duration-300 hover:shadow-lg"
>
  <!-- Desktop: Grid with 2 columns (image left, content right) -->
  <!-- Mobile: Stack (image top, content below) -->
  <div class="grid grid-cols-1 md:grid-cols-5">
    <!-- Image Column (40% on desktop) -->
    <div class="pathway-image-container relative md:col-span-2">
      <div class="aspect-[16/9] w-full overflow-hidden md:aspect-[4/3] md:h-full">
        <img
          src={imageSrc}
          alt={imageAlt}
          class="h-full w-full object-cover transition-transform duration-500 hover:scale-105"
          loading="lazy"
        />
      </div>
    </div>

    <!-- Content Column (60% on desktop) -->
    <div class="pathway-content flex flex-col justify-center p-6 md:col-span-3 md:p-8">
      <!-- Title -->
      <h3 class="mb-3 text-xl font-bold text-foreground sm:text-2xl">
        {title}
      </h3>

      <!-- Description (2-3 lines max) -->
      <p class="mb-5 text-sm text-muted-foreground sm:text-base md:mb-6">
        {description}
      </p>

      <!-- Service Pills (wrap cleanly) -->
      <div class="flex flex-wrap gap-2">
        {services.map((service) => (
          <ServicePill
            label={service.name}
            href={service.href}
            variant="default"
          />
        ))}
      </div>
    </div>
  </div>
</div>

<style>
  /* Ensure consistent card heights on desktop */
  @media (min-width: 768px) {
    .pathway-card {
      min-height: 280px;
    }

    .pathway-image-container {
      height: 100%;
    }
  }

  /* Image hover effect */
  .pathway-image-container img {
    will-change: transform;
  }

  /* Smooth transitions */
  .pathway-card {
    will-change: box-shadow;
  }

  /* Ensure good line clamping for description on mobile */
  @media (max-width: 767px) {
    .pathway-content p {
      display: -webkit-box;
      -webkit-line-clamp: 3;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
  }
</style>
