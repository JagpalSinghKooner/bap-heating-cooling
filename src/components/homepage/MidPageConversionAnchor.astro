---
/**
 * Mid-Page Conversion Anchor
 * Catches users who scrolled but haven't converted - compact, benefit-led
 */

import { getBusinessProfile } from '../../lib/getBusinessProfile';
import Button from '../primitives/Button.astro';

const profile = await getBusinessProfile();
---

<section class="relative overflow-hidden bg-gradient-to-r from-primary/95 to-primary py-12 sm:py-16">
  <div class="section-container relative z-10">
    <div class="mx-auto max-w-3xl text-center text-white">
      {/* Headline - Short, benefit-led */}
      <h2 class="mb-3 text-2xl font-bold sm:text-3xl lg:text-4xl">
        Ready for Reliable HVAC Service?
      </h2>

      {/* Subtext - 1 line max */}
      <p class="mb-6 text-lg text-white/90">
        Get expert service with upfront pricing and guaranteed satisfaction
      </p>

      {/* CTAs */}
      <div class="flex flex-col gap-3 sm:flex-row sm:justify-center sm:gap-4">
        {/* Primary CTA */}
        <Button
          variant="secondary"
          size="lg"
          href={profile.contact.booking.enabled ? profile.contact.booking.url : `tel:${profile.contact.phone_e164}`}
          data-cta-context="mid-page-anchor"
          target={profile.contact.booking.enabled ? "_blank" : undefined}
          rel={profile.contact.booking.enabled ? "noopener noreferrer" : undefined}
          class="bg-white text-primary hover:bg-gray-100 shadow-lg hover:shadow-xl"
        >
          <span>Schedule Service</span>
          <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
          </svg>
        </Button>

        {/* Secondary CTA */}
        <Button
          variant="outline"
          size="lg"
          href={`tel:${profile.contact.phone_e164}`}
          data-cta-context="mid-page-anchor"
          class="border-white text-white hover:bg-white/10"
        >
          <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
          </svg>
          <span>Call {profile.contact.phone_display}</span>
        </Button>
      </div>
    </div>
  </div>

  {/* Subtle Background Pattern */}
  <div class="absolute inset-0 opacity-5" aria-hidden="true">
    <div class="absolute inset-0" style="background-image: repeating-linear-gradient(45deg, transparent, transparent 20px, rgba(255,255,255,.05) 20px, rgba(255,255,255,.05) 40px);" />
  </div>
</section>
