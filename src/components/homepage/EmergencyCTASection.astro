---
import { getBusinessProfile } from '../../lib/getBusinessProfile';

const profile = await getBusinessProfile();
---

<section class="relative overflow-hidden bg-gradient-to-r from-red-600 to-orange-600 py-12 sm:py-16">
  <div class="section-container relative z-10">
    <div class="mx-auto max-w-4xl text-center text-white">
      {/* Emergency Badge */}
      <div class="mb-4 inline-flex items-center gap-2 rounded-full bg-white/20 px-4 py-2 text-sm font-semibold backdrop-blur-sm">
        <span class="text-2xl" aria-hidden="true">ðŸš¨</span>
        <span>24/7 Emergency Service Available</span>
      </div>

      {/* Headline */}
      <h2 class="mb-4 text-3xl font-bold sm:text-4xl lg:text-5xl">
        Need Emergency HVAC Service?
      </h2>

      {/* Description */}
      <p class="mb-8 text-lg text-white/90 sm:text-xl">
        {profile.hours.response_time_statement}
      </p>

      {/* CTA Buttons */}
      <div class="flex flex-col gap-4 sm:flex-row sm:justify-center">
        <a
          href={`tel:${profile.contact.phone_e164}`}
          class="inline-flex items-center justify-center gap-2 rounded-md bg-white px-8 py-4 text-lg font-bold text-red-600 shadow-xl transition-all hover:bg-gray-100 hover:shadow-2xl"
          data-cta-context="emergency-section"
        >
          <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
          </svg>
          <span>Call Now: {profile.contact.phone_display}</span>
        </a>

        {profile.contact.booking.enabled && (
          <a
            href={profile.contact.booking.url}
            target="_blank"
            rel="noopener noreferrer"
            class="inline-flex items-center justify-center gap-2 rounded-md border-2 border-white bg-transparent px-8 py-4 text-lg font-bold text-white transition-all hover:bg-white hover:text-red-600"
            data-cta-context="emergency-section"
          >
            <span>Book Online</span>
          </a>
        )}
      </div>
    </div>
  </div>

  {/* Background Pattern */}
  <div class="absolute inset-0 opacity-10" aria-hidden="true">
    <div class="absolute inset-0" style="background-image: repeating-linear-gradient(45deg, transparent, transparent 20px, rgba(255,255,255,.1) 20px, rgba(255,255,255,.1) 40px);" />
  </div>
</section>
