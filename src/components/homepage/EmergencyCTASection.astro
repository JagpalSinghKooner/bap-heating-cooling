---
import { getBusinessProfile } from '../../lib/getBusinessProfile';
import Badge from '../primitives/Badge.astro';

const profile = await getBusinessProfile();
---

<section class="relative overflow-hidden bg-gradient-to-r from-red-600 to-orange-500 py-14 md:py-20 lg:py-24">
  <div class="section-container relative z-10">
    <div class="text-center text-white">
      {/* Emergency Badge */}
      <Badge variant="default" size="md" class="mb-4 bg-white/20 text-white backdrop-blur-sm border-0">
        <span class="relative flex h-3 w-3 mr-2">
          <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-white opacity-75"></span>
          <span class="relative inline-flex rounded-full h-3 w-3 bg-white"></span>
        </span>
        <span>24/7 Emergency Service</span>
      </Badge>

      {/* Problem-Focused Headline */}
      <h2 class="section-title mx-auto mb-4 max-w-3xl text-white">
        Furnace Not Working? We're Here 24/7
      </h2>

      {/* Response Time Guarantee */}
      <p class="mx-auto mb-3 max-w-2xl text-xl font-semibold text-white sm:text-2xl">
        Technician at your door typically within 60 minutes
      </p>

      {/* Trust reinforcement */}
      <p class="mx-auto mb-8 max-w-2xl text-base text-white/80 sm:text-lg">
        No overtime charges. Upfront pricing. We fix it right the first time.
      </p>

      {/* Primary CTA - Large Phone Button */}
      <a
        href={`tel:${profile.contact.phone_e164}`}
        data-cta="emergency"
        data-cta-context="emergency-section"
        class="group inline-flex items-center gap-3 rounded-full bg-white px-8 py-5 text-red-600 shadow-2xl transition-all hover:scale-105 hover:shadow-3xl"
      >
        <span class="flex h-12 w-12 items-center justify-center rounded-full bg-red-600 text-white group-hover:animate-pulse">
          <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
          </svg>
        </span>
        <span class="flex flex-col text-left">
          <span class="text-sm font-medium text-gray-600">Call Now - 24/7</span>
          <span class="text-2xl font-bold sm:text-3xl">{profile.contact.phone_display}</span>
        </span>
      </a>

      {/* Secondary CTA */}
      <div class="mt-6">
        {profile.contact.booking.enabled && (
          <a
            href={profile.contact.booking.url}
            target="_blank"
            rel="noopener noreferrer"
            data-cta-context="emergency-section"
            class="inline-flex items-center gap-2 text-white/90 underline underline-offset-4 transition-colors hover:text-white"
          >
            <span>Or book online for non-emergencies</span>
            <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
            </svg>
          </a>
        )}
      </div>
    </div>
  </div>

  {/* Background Pattern */}
  <div class="absolute inset-0 opacity-10" aria-hidden="true">
    <div class="absolute inset-0" style="background-image: repeating-linear-gradient(45deg, transparent, transparent 20px, rgba(255,255,255,.1) 20px, rgba(255,255,255,.1) 40px);" />
  </div>
</section>
