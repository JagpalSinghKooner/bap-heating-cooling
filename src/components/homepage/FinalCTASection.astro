---
/**
 * Final CTA Section - Strong Conversion Point
 * The single dedicated CTA section at the end of the homepage
 */

import Section from '../primitives/Section.astro';
import { getBusinessProfile } from '../../lib/getBusinessProfile';

const profile = await getBusinessProfile();
---

<Section variant="default">
  <div class="overflow-hidden rounded-2xl bg-gradient-to-r from-brand-blue to-brand-blue-dark">
    <div class="px-6 py-12 text-center sm:px-10 sm:py-16">
      <h2 class="mb-3 text-2xl font-bold text-white sm:text-3xl lg:text-4xl">
        Ready to get started?
      </h2>
      <p class="mx-auto mb-8 max-w-xl text-base text-white/90 sm:text-lg">
        Call us today or book online. Free estimates, no pressure, just honest advice from your local HVAC experts.
      </p>
      <div class="flex flex-col items-center gap-4 sm:flex-row sm:justify-center">
        <!-- Primary: Call -->
        <a
          href={`tel:${profile.contact.phone_e164}`}
          class="group inline-flex w-full items-center justify-center gap-2 rounded-full bg-white px-8 py-4 font-bold text-brand-blue shadow-xl transition-all hover:scale-105 hover:shadow-2xl sm:w-auto"
          data-cta-context="final-call"
        >
          <svg class="h-5 w-5 transition-transform group-hover:rotate-12" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
          </svg>
          <span>Call {profile.contact.phone_display}</span>
        </a>
        <!-- Secondary: Book -->
        {profile.contact.booking.enabled && (
          <a
            href={profile.contact.booking.url}
            target="_blank"
            rel="noopener noreferrer"
            class="group inline-flex w-full items-center justify-center gap-2 rounded-full border-2 border-white bg-transparent px-8 py-4 font-bold text-white transition-all hover:bg-white hover:text-brand-blue sm:w-auto"
            data-cta-context="final-booking"
          >
            <span>Book Free Estimate</span>
            <svg class="h-5 w-5 transition-transform group-hover:translate-x-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
            </svg>
          </a>
        )}
      </div>
    </div>
  </div>
</Section>
