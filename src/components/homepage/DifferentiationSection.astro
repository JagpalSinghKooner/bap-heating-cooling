---
/**
 * Differentiation Section - Premium "Why Choose Us" with Competitive Comparison
 * Emotion-driven design addressing customer fears with social proof and trust indicators
 */

import Section from '../primitives/Section.astro';
import { getBusinessProfile } from '../../lib/getBusinessProfile';

const profile = await getBusinessProfile();

const differentiators = [
  {
    title: 'Honest Recommendations, Not Upsells',
    customerFear: 'Worried about being pressured into unnecessary repairs?',
    description: 'We diagnose the real problem and give you options. If your system just needs a repair, we won\'t push you to replace it. Our technicians are trained to solve problems, not sell you stuff.',
    socialProof: '94% of customers choose our recommended solution',
    icon: '<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>',
    gradient: 'from-green-500/10 to-emerald-500/10',
    comparison: { them: 'Push expensive replacements', us: 'Fix what can be fixed' },
  },
  {
    title: 'Our Own Certified Technicians',
    customerFear: 'Concerned about who\'s actually coming to your home?',
    description: 'Every technician works directly for us. Background-checked, licensed, and trained in-house. No random subcontractors showing up with a van.',
    socialProof: '100% of jobs done by our certified team',
    icon: '<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" /></svg>',
    gradient: 'from-blue-500/10 to-cyan-500/10',
    comparison: { them: 'Use subcontractors', us: 'Direct employees only' },
  },
  {
    title: 'Upfront Pricing, No Surprises',
    customerFear: 'Afraid of hidden fees appearing on the final bill?',
    description: 'You see the full price before we touch a wrench. No "diagnostic fees" that disappear into the total. No surprise charges discovered mid-job. What we quote is what you pay.',
    socialProof: '100% pricing transparency guaranteed',
    icon: '<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>',
    gradient: 'from-yellow-500/10 to-orange-500/10',
    comparison: { them: 'Hidden fees add up', us: 'Price locked before work starts' },
  },
  {
    title: 'No Pressure, Just Options',
    customerFear: 'Don\'t want to feel rushed or manipulated?',
    description: 'We explain what\'s wrong, show you the solutions, and let you think it over. No "today only" deals. No hovering. No guilt trips. Your home, your timeline, your choice.',
    socialProof: 'Zero complaints about sales pressure',
    icon: '<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5" /></svg>',
    gradient: 'from-purple-500/10 to-pink-500/10',
    comparison: { them: '"Today only" pressure', us: 'Take your time, decide later' },
  },
];
---

<Section variant="default">
  <!-- Premium Section Header -->
  <div class="mb-12 text-center sm:mb-16">
    <p class="eyebrow mb-3">Why Homeowners Choose Us</p>
    <h2 class="section-title mx-auto mb-4 max-w-3xl">
      Tired of feeling like you're being taken advantage of?
    </h2>
    <p class="mx-auto max-w-2xl text-base leading-relaxed text-muted-foreground">
      We built our business on doing the opposite of what frustrates you about other HVAC companies. No games, no pressure, no BS â€” just professional service you can trust.
    </p>
  </div>

  <!-- Differentiators Grid -->
  <div class="grid gap-6 sm:gap-8 lg:grid-cols-2">
    {differentiators.map((item) => (
      <div class={`group relative overflow-hidden rounded-2xl border-2 border-border bg-gradient-to-br ${item.gradient} p-6 shadow-lg transition-all duration-300 hover:border-primary/30 hover:shadow-2xl sm:p-8`}>
        <!-- Icon & Title -->
        <div class="mb-4 flex items-start gap-4">
          <div class="flex h-14 w-14 flex-shrink-0 items-center justify-center rounded-xl bg-primary/10 text-primary transition-transform group-hover:scale-110">
            <span class="h-7 w-7" set:html={item.icon} />
          </div>
          <div class="flex-1">
            <h3 class="mb-2 text-xl font-extrabold text-foreground">
              {item.title}
            </h3>
            <!-- Customer Fear Callout -->
            <div class="mb-3 rounded-lg border-l-4 border-primary bg-primary/5 py-2 pl-3 pr-2">
              <p class="text-xs font-semibold italic text-primary">
                {item.customerFear}
              </p>
            </div>
          </div>
        </div>

        <!-- Description -->
        <p class="mb-4 text-base leading-relaxed text-muted-foreground">
          {item.description}
        </p>

        <!-- Comparison Table -->
        <div class="mb-4 grid grid-cols-2 gap-3">
          <div class="rounded-lg border border-red-500/20 bg-red-500/5 p-3">
            <div class="mb-1 flex items-center gap-1">
              <svg class="h-4 w-4 text-red-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
              </svg>
              <span class="text-xs font-bold text-red-700">Others</span>
            </div>
            <p class="text-xs text-red-600">{item.comparison.them}</p>
          </div>
          <div class="rounded-lg border border-green-500/20 bg-green-500/10 p-3">
            <div class="mb-1 flex items-center gap-1">
              <svg class="h-4 w-4 text-green-600" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
              </svg>
              <span class="text-xs font-bold text-green-700">Us</span>
            </div>
            <p class="text-xs font-semibold text-green-700">{item.comparison.us}</p>
          </div>
        </div>

        <!-- Social Proof Badge -->
        <div class="flex items-center gap-2 rounded-lg border border-border bg-background/50 px-3 py-2">
          <svg class="h-4 w-4 flex-shrink-0 text-primary" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
          </svg>
          <span class="text-xs font-bold text-foreground">
            {item.socialProof}
          </span>
        </div>
      </div>
    ))}
  </div>

  <!-- Bottom Trust Statement & CTA -->
  <div class="mt-12 rounded-2xl border-2 border-primary/20 bg-gradient-to-br from-primary/5 to-primary/10 p-8 sm:mt-16 sm:p-10">
    <div class="mx-auto max-w-3xl text-center">
      <div class="mb-4 inline-flex h-16 w-16 items-center justify-center rounded-full bg-primary/10">
        <svg class="h-8 w-8 text-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
        </svg>
      </div>
      <h3 class="mb-3 text-2xl font-bold text-foreground sm:text-3xl">
        Experience the difference honest service makes
      </h3>
      <p class="mb-6 text-base text-muted-foreground">
        30+ years of building trust, one job at a time. No gimmicks. No pressure. Just professional HVAC service from people who actually care.
      </p>
      <div class="flex flex-col gap-3 sm:flex-row sm:justify-center">
        <a
          href={`tel:${profile.contact.phone_e164}`}
          class="inline-flex items-center justify-center gap-2 rounded-xl bg-primary px-6 py-3 text-base font-bold text-primary-foreground shadow-lg transition-all hover:scale-105 hover:bg-primary/90"
          data-cta-context="differentiation-call"
        >
          <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
          </svg>
          <span>Call {profile.contact.phone_display}</span>
        </a>
        <a
          href={profile.contact.booking.url}
          target="_blank"
          rel="noopener noreferrer"
          class="inline-flex items-center justify-center gap-2 rounded-xl border-2 border-primary bg-background px-6 py-3 text-base font-bold text-primary transition-all hover:scale-105 hover:bg-primary/5"
          data-cta-context="differentiation-booking"
        >
          <span>Book Online</span>
          <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
          </svg>
        </a>
      </div>
    </div>
  </div>
</Section>
