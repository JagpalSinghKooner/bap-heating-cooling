---
import { getBusinessProfile } from '../../lib/getBusinessProfile';
import Button from '../primitives/Button.astro';

interface Props {
  eyebrow?: string;
  headline: string;
  description?: string;
  context?: string;
}

const {
  eyebrow = 'Professional HVAC Services',
  headline,
  description,
  context = 'hero'
} = Astro.props;

const profile = await getBusinessProfile();
---

<section class="relative overflow-hidden bg-gradient-to-r from-brand-blue to-brand-blue-dark">
  <!-- Background Image with Overlay -->
  <div class="absolute inset-0 z-0">
    <img
      src="https://placehold.co/1600x900/1e40af/ffffff.png?text=."
      alt=""
      class="h-full w-full object-cover"
    />
    <!-- Gradient Overlay -->
    <div class="absolute inset-0 bg-gradient-to-r from-brand-blue/90 via-brand-blue/70 to-transparent"></div>
  </div>

  <!-- Content -->
  <div class="relative z-10 mx-auto max-w-6xl px-4 py-12 sm:px-6 sm:py-16 lg:px-8 lg:py-20">
    <div class="mx-auto max-w-4xl text-center text-white">
      <!-- Eyebrow - Enhanced Visibility -->
      {eyebrow && (
        <div class="mb-4 inline-flex items-center gap-2 rounded-full bg-white/20 px-4 py-2 text-sm font-bold uppercase tracking-wide text-white backdrop-blur-sm">
          <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
          </svg>
          <span>{eyebrow}</span>
        </div>
      )}

      <!-- Headline - Optimized -->
      <h1 class="mb-4 text-3xl font-extrabold leading-tight sm:text-4xl md:text-5xl lg:text-6xl">
        {headline}
      </h1>

      <!-- Description - Optimized -->
      {description && (
        <p class="mb-8 text-base leading-relaxed text-white/95 sm:text-lg md:text-xl">
          {description}
        </p>
      )}

      <!-- CTAs - Call Primary, Book Secondary -->
      <div class="mb-10 flex flex-col items-center justify-center gap-4 sm:flex-row">
        <!-- Primary CTA: Call -->
        <Button
          variant="emergency"
          size="lg"
          href={`tel:${profile.contact.phone_e164}`}
          data-cta-context={context}
          class="w-full rounded-full shadow-2xl transition-all hover:translate-y-[-2px] hover:shadow-3xl sm:w-auto"
        >
          <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
          </svg>
          <span class="font-bold">Call {profile.contact.phone_display}</span>
        </Button>

        <!-- Secondary CTA: Book Online -->
        {profile.contact.booking.enabled && (
          <Button
            variant="outline"
            size="lg"
            href={profile.contact.booking.url}
            target="_blank"
            rel="noopener noreferrer"
            data-cta-context={context}
            class="w-full rounded-full border-2 border-white bg-transparent text-white transition-all hover:bg-white hover:text-brand-blue sm:w-auto"
          >
            <span class="font-semibold">Book Online</span>
            <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
            </svg>
          </Button>
        )}
      </div>

      <!-- Trust Proof Chips - Compact Premium Design (Option A) -->
      <div class="flex flex-wrap items-center justify-center gap-3 text-sm sm:gap-4">
        <!-- Chip 1: Google Rating -->
        <div class="inline-flex items-center gap-2 rounded-full bg-white/10 px-4 py-2 backdrop-blur-sm">
          <svg class="h-4 w-4 flex-shrink-0 text-yellow-400" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
          </svg>
          <span class="font-bold">{profile.reputation.google_rating}★</span>
          <span class="text-white/80">·</span>
          <span class="font-medium text-white/90">{profile.reputation.google_review_count}+ reviews</span>
        </div>

        <!-- Chip 2: Years in Business -->
        <div class="inline-flex items-center gap-2 rounded-full bg-white/10 px-4 py-2 backdrop-blur-sm">
          <svg class="h-4 w-4 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
          <span class="font-semibold">Serving since {profile.business.established_year}</span>
        </div>

        <!-- Chip 3: Licensed & Insured -->
        <div class="inline-flex items-center gap-2 rounded-full bg-white/10 px-4 py-2 backdrop-blur-sm">
          <svg class="h-4 w-4 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
          </svg>
          <span class="font-semibold">Licensed & Insured</span>
        </div>

        <!-- Chip 4: WSIB Compliant -->
        <div class="inline-flex items-center gap-2 rounded-full bg-white/10 px-4 py-2 backdrop-blur-sm">
          <svg class="h-4 w-4 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
          <span class="font-semibold">WSIB Compliant</span>
        </div>
      </div>
    </div>
  </div>
</section>
