---
/**
 * ReviewsBlock Component
 * Minimal review display component (no styling polish)
 */
import type { Review } from '../lib/reviewResolver';

interface Props {
  reviews: Review[];
  title?: string;
}

const { reviews, title = 'Customer Reviews' } = Astro.props;
---

<section class="reviews-block">
  <h2>{title}</h2>

  {reviews.length === 0 ? (
    <p>No reviews available.</p>
  ) : (
    <div class="reviews-list">
      {reviews.map((review) => (
        <div class="review-item" data-verified={review.data.verified}>
          <div class="review-header">
            <strong>{review.data.authorName}</strong>
            <span class="review-rating">
              {'‚≠ê'.repeat(review.data.rating)}
            </span>
            <span class="review-source" data-source={review.data.source}>
              {review.data.source}
            </span>
          </div>

          <p class="review-text">{review.data.text}</p>

          {review.data.url && (
            <a href={review.data.url} target="_blank" rel="noopener noreferrer">
              View original review
            </a>
          )}

          {review.data.reviewDate && (
            <time class="review-date">{review.data.reviewDate}</time>
          )}
        </div>
      ))}
    </div>
  )}
</section>

<style>
  .reviews-block {
    margin: 2rem 0;
    padding: 1rem;
    border: 1px solid #ddd;
  }

  .reviews-list {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
    margin-top: 1rem;
  }

  .review-item {
    padding: 1rem;
    border: 1px solid #eee;
    background: #fafafa;
  }

  .review-header {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 0.5rem;
  }

  .review-rating {
    color: #ffa500;
  }

  .review-source {
    font-size: 0.75rem;
    color: #666;
    padding: 0.125rem 0.5rem;
    background: #e0e0e0;
    border-radius: 3px;
  }

  .review-text {
    margin: 0.5rem 0;
    line-height: 1.5;
  }

  .review-date {
    font-size: 0.875rem;
    color: #666;
  }

  .review-item a {
    font-size: 0.875rem;
    color: #0066cc;
    text-decoration: underline;
  }
</style>
