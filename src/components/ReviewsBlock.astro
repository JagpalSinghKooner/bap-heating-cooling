---
/**
 * ReviewsBlock Component
 * Displays customer reviews using design system card styles
 */
import type { Review } from '../lib/reviewResolver';

interface Props {
  reviews: Review[];
  title?: string;
  class?: string;
}

const { reviews, title = 'Customer Reviews', class: className = '' } = Astro.props;
---

<section class={`section bg-white ${className}`}>
  <div class="section-container">
    <!-- Enhanced Section Header -->
    <div class="mb-12 text-center">
      <p class="eyebrow mb-3">Customer Testimonials</p>
      <h2 class="section-title">{title}</h2>
      <p class="section-description mx-auto max-w-2xl">
        Real experiences from homeowners who trust us with their comfort
      </p>
    </div>

    {reviews.length === 0 ? (
      <p class="text-center text-muted-foreground">No reviews available.</p>
    ) : (
      <div class="grid-responsive-3">
        {reviews.map((review) => (
          <div class="card-standard flex h-full flex-col" data-verified={review.data.verified}>
            {/* Star Rating - More Prominent */}
            <div class="mb-4 flex items-center gap-1 text-2xl text-yellow-500" aria-label={`${review.data.rating} stars`}>
              {'⭐'.repeat(review.data.rating)}
            </div>

            {/* Review Text - Larger */}
            <p class="mb-6 flex-grow text-base leading-relaxed text-foreground">
              "{review.data.text}"
            </p>

            {/* Author Info - Better Hierarchy */}
            <div class="border-t pt-4">
              <div class="mb-3 flex items-center justify-between">
                <strong class="text-lg font-bold">{review.data.authorName}</strong>
                <span
                  class="rounded-full bg-muted px-3 py-1 text-xs font-medium text-muted-foreground"
                  data-source={review.data.source}
                >
                  {review.data.source}
                </span>
              </div>

              {review.data.reviewDate && (
                <time datetime={review.data.reviewDate} class="text-sm text-muted-foreground">
                  {review.data.reviewDate}
                </time>
              )}

              {review.data.url && (
                <a
                  href={review.data.url}
                  target="_blank"
                  rel="noopener noreferrer"
                  class="mt-2 inline-flex items-center gap-1 text-sm font-semibold text-primary hover:underline"
                >
                  <span>View original</span>
                  <span aria-hidden="true">→</span>
                </a>
              )}
            </div>
          </div>
        ))}
      </div>
    )}
  </div>
</section>
